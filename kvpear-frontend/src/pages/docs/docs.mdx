import Highlight from 'react-highlight'
import { Spacer } from '../../components/common/Mdx/Mdx';
import EndpointLabel from '../../components/docs/EndpointLabel/EndpointLabel';

<h1 id="buckets">Buckets</h1>
<Spacer height={2} />

<h2 id="create-bucket">Create your bucket</h2>
<EndpointLabel method="POST" path="/v1/buckets" />
Buckets are the top level of the KV Pear hierarchy. They are used to group related data together. Buckets are created using the `POST` method on the `/buckets` endpoint. The name of the bucket is passed as the request body. The bucket name must be unique and can only contain letters, numbers, dashes and underscores. The bucket name is case sensitive.
Return value is the bucket ID.
<Highlight className="bash block">
  &gt; curl -X POST -d "mybucket" http://localhost:8080/buckets
  "64f3718e89f430a16ceaecfe"
</Highlight>
<Spacer height={4} />
<hr />

<Spacer height={1} />
<h2 id="list-buckets">List your buckets</h2>
<EndpointLabel method="GET" path="/v1/buckets" />
You can list all of your buckets using the `GET` method on the `/buckets` endpoint.
<Highlight className="bash block">
  &gt; curl -X GET http://localhost:8080/buckets
  [&#123; "name": "mybucket", "created": "2023-01-01T00:00:00Z" &#125;]
</Highlight>
<Spacer height={4} />
<hr />

<Spacer height={1} />
<h2 id="delete-buckets">Delete a bucket</h2>
<EndpointLabel method="DELETE" path="/v1/buckets/:bucketId" />
You can delete a bucket using the `DELETE` method on the `/buckets/:bucketId` endpoint.
<Highlight className="bash block">
  &gt; curl -X DELETE http://localhost:8080/buckets/64f3718e89f430a16ceaecfe
</Highlight>
<Spacer height={8} />

<h1 id="kvs">Key Values</h1>
<Spacer height={2} />

<h2 id="create-kv">Create or update a value</h2>
<EndpointLabel method="POST" path="/v1/kvs/:bucketId/:keyName" />
Key values are created or updated using the `POST` method on the `/kvs/:bucketId/:keyName` endpoint. The value string is passed in as the request body. 
If the key exists, the value will be updated. If the key does not exist, it will be created.
The key value must be unique within the bucket and can only contain letters, numbers, dashes and underscores. The key value is case sensitive.
Return value is the key value string.
<Highlight className="bash block">
  &gt; curl -X POST -d "myvalue" http://localhost:8080/buckets/64f3718e89f430a16ceaecfe/mykey
  "myvalue"
</Highlight>
<Spacer height={4} />
<hr />

<Spacer height={1} />
<h2 id="get-kv">Get a value</h2>
<EndpointLabel method="GET" path="/v1/kvs/:bucketId/:keyName" />
You can get a key value using the `GET` method on the `/kvs/:bucketId/:keyName` endpoint.
<Highlight className="bash block">
  &gt; curl -X GET http://localhost:8080/buckets/64f3718e89f430a16ceaecfe/mykey
  "myvalue"
</Highlight>
<Spacer height={4} />
<hr />

<Spacer height={1} />
<h2 id="list-kv">List/search values</h2>
<EndpointLabel method="GET" path="/v1/kvs/:bucketId" />
You can list all of your key values using the `GET` method on the `/kvs/:bucketId` endpoint.
<Highlight className="bash block">
  &gt; curl -X GET http://localhost:8080/buckets/64f3718e89f430a16ceaecfe
  [&#123; "name": "mykey", "value": "myvalue", "created": "2023-01-01T00:00:00Z" &#125;]
</Highlight>
<Spacer height={1} />
You can provide additional query parameters to filter the results:
- `prefix`: *string* - only return key values that start with the prefix
- `regex`: *string* - only return key values that match the regex. The regex string must be URL encoded.
<Spacer height={3} />
<hr />

<Spacer height={1} />
<h2 id="delete-kv">Delete a value</h2>
<EndpointLabel method="GET" path="/v1/kvs/:bucketId/:keyName" />
You can delete a key-value pair using the `DELETE` method on the `/v1/kvs/:bucketId/:keyName` endpoint.
<Highlight className="bash block">
  &gt; curl -X DELETE http://localhost:8080/buckets/64f3718e89f430a16ceaecfe/myKey
</Highlight>
<Spacer height={4} />
